import{b as m}from"./chunk-PR5IPSC4.js";import{B as A,c as E,e as L,f as x,g as F,i as R,l as N,o as O,p as W}from"./chunk-XESAAIJC.js";import{$a as v,D as o,E as n,K as d,T as s,W as u,X as f,Y as h,Z as C,Za as P,_a as y,ab as b,bb as k,fa as S,ha as I,ib as T,la as M,r as g,s as p,u as _}from"./chunk-3JAT2R2F.js";import"./chunk-I2Q4BQIR.js";import"./chunk-JZLQNAEF.js";import"./chunk-KZTU6K37.js";import"./chunk-TWFILCKL.js";import"./chunk-G3CV3VGG.js";import"./chunk-P64PGJAX.js";import"./chunk-GSVKY5FB.js";import"./chunk-OZG6UOOH.js";import"./chunk-4U6PRYVA.js";import"./chunk-BTS5SJXR.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{i as w}from"./chunk-D2OBB6XO.js";var J=(()=>{let a=class a{constructor(e,i){this.authService=e,this.router=i,this.email="",this.password="",this.emailInvalid=!1,this.passwordInvalid=!1,this.emailError="",this.passwordError="",this.formSubmitted=!1}loginUser(){return w(this,null,function*(){try{let e=yield this.authService.login(this.email,this.password);console.log("Login successful:",e),e.token?(localStorage.setItem("token",e.token),console.log("Token stored in localStorage:",localStorage.getItem("token")),this.router.navigate(["/home"])):console.error("Token missing in response")}catch(e){console.error("Login failed:",e),e.response&&(console.error("Error Response Data:",e.response.data),console.error("Error Status Code:",e.response.status)),e.status===401?alert("Invalid email or password."):alert(`An error occurred: ${e.message}`)}})}logPassword(){console.log("Password Input:",this.password)}goToRegister(){this.router.navigate(["/register"])}goToForgotPassword(){this.router.navigate(["/forgot-password"])}validatePassword(e){return/^(?=.*[A-Z])(?=.*\d).{6,}$/.test(e)}};a.\u0275fac=function(i){return new(i||a)(p(m),p(M))},a.\u0275cmp=_({type:a,selectors:[["app-login"]],features:[C([m])],decls:22,vars:2,consts:[[1,"flex-center"],["color","primary"],[3,"submit"],["position","floating"],["name","email","type","email",3,"ngModelChange","ngModel"],["type","password","name","password",3,"ngModelChange","ngModel"],["color","primary","size","full","type","submit"],[1,"forgot-password",3,"click"],["color","success","fill","clear","size","full",3,"click"]],template:function(i,t){i&1&&(o(0,"ion-content")(1,"div",0)(2,"ion-card")(3,"ion-card-header")(4,"ion-card-title",1),s(5,"HIV/AIDS app"),n()(),o(6,"ion-card-content")(7,"form",2),d("submit",function(){return t.loginUser()}),o(8,"ion-item")(9,"ion-label",3),s(10,"Email"),n(),o(11,"ion-input",4),h("ngModelChange",function(r){return f(t.email,r)||(t.email=r),r}),n()(),o(12,"ion-item")(13,"ion-label",3),s(14,"Password"),n(),o(15,"ion-input",5),h("ngModelChange",function(r){return f(t.password,r)||(t.password=r),r}),n()(),o(16,"ion-button",6),s(17,"Login"),n(),o(18,"p",7),d("click",function(){return t.goToForgotPassword()}),s(19,"Forgot Password?"),n(),o(20,"ion-button",8),d("click",function(){return t.goToRegister()}),s(21,"Register"),n()()()()()()),i&2&&(g(11),u("ngModel",t.email),g(4),u("ngModel",t.password))},dependencies:[A,N,L,R,x,I,O,E,W,F,S,T,k,P,y,b,v],styles:["ion-button[_ngcontent-%COMP%]   [color=dark][_ngcontent-%COMP%]{text-transform:initial}ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-sky-blue);background-color:#87ceeb}ion-card[_ngcontent-%COMP%]{width:70%}.forgot-password[_ngcontent-%COMP%]{text-align:center;color:#3880ff;cursor:pointer;margin-top:10px}.forgot-password[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let c=a;return c})();export{J as LoginPage};
