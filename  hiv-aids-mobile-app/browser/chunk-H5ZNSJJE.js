import{a as L,b as U,c as n,d as c}from"./chunk-6J3ZOXLE.js";import{b as s}from"./chunk-PR5IPSC4.js";import{l as C,n as T,x as k,y}from"./chunk-XESAAIJC.js";import{B as l,D as h,E as p,T as m,Z as f,fa as v,ga as r,ha as _,ib as D,ja as S,r as u,s as o,u as I}from"./chunk-3JAT2R2F.js";import"./chunk-I2Q4BQIR.js";import"./chunk-JZLQNAEF.js";import"./chunk-KZTU6K37.js";import"./chunk-TWFILCKL.js";import"./chunk-G3CV3VGG.js";import"./chunk-P64PGJAX.js";import"./chunk-GSVKY5FB.js";import"./chunk-OZG6UOOH.js";import"./chunk-4U6PRYVA.js";import"./chunk-BTS5SJXR.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{i as g}from"./chunk-D2OBB6XO.js";var J=(()=>{let t=class t{constructor(e,i,d,w,P){this.userInteractionService=e,this.http=i,this.authService=d,this.httpService=w,this.route=P,this.page_id=null,this.content=null,this.user_id=null,this.startTime=0,this.time_spent=0}ngOnInit(){this.time_spent=0,this.pageLoadTime=Date.now(),console.log("\u{1F539} Page loaded at:",new Date(this.pageLoadTime).toLocaleTimeString()),this.timer&&clearInterval(this.timer),this.timer=setInterval(()=>{this.time_spent=Math.floor((Date.now()-this.pageLoadTime)/1e3),console.log("\u23F3 Time Spent:",this.time_spent)},1e3),this.user_id=this.authService.getUserId(),this.user_id?console.log("\u2705 User ID:",this.user_id):console.error("\u274C User ID is missing"),this.route.queryParams.subscribe(e=>{this.page_id=e.id?+e.id:null,this.page_id?(this.loadContent(),this.userInteractionService.startTracking(this.page_id)):console.error("\u274C No page ID found.")})}loadContent(){return g(this,null,function*(){if(!this.page_id){console.error("Page ID is not set.");return}try{console.log("Fetching content for page ID:",this.page_id);let e=yield this.httpService.getPageContent(this.page_id);this.content=e,console.log("Content loaded:",this.content)}catch(e){console.error("Error fetching page content:",e)}})}onLinkClick(){if(this.page_id&&this.user_id){console.log("\u2705 Calling recordClick() with:",this.page_id,this.user_id,this.time_spent,this.userInteractionService.clicks+1);let e=this.userInteractionService.recordClick(this.page_id,this.user_id,this.time_spent,++this.userInteractionService.clicks);console.log("\u{1F4CC} recordClick() returned:",e)}else console.error("\u274C Page ID or User ID is missing!")}ionViewWillLeave(){clearInterval(this.timer),console.log(`\u{1F680} ionViewWillLeave: Time spent on page ${this.time_spent} seconds`),this.page_id&&this.user_id?this.userInteractionService.stopTracking(this.user_id):console.error("\u274C Page ID or User ID is missing!")}ngOnDestroy(){clearInterval(this.timer),console.log(`Time spent on the page: ${this.time_spent} seconds`),this.page_id&&this.user_id?this.userInteractionService.stopTracking(this.user_id):console.error("Page ID or User ID is missing!"),console.log("ngOnDestroy triggered")}};t.\u0275fac=function(i){return new(i||t)(o(c),o(r),o(s),o(n),o(S))},t.\u0275cmp=I({type:t,selectors:[["app-faqsection"]],features:[f([r,U,L,n,s,c])],decls:9,vars:2,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"]],template:function(i,d){i&1&&(h(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),m(3,"FAQSection"),p()()(),h(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),m(8,"FAQSection"),p()()()()),i&2&&(l("translucent",!0),u(4),l("fullscreen",!0))},dependencies:[C,T,k,_,y,v,D],encapsulation:2});let a=t;return a})();export{J as FAQSectionPage};
